# -*- coding: utf-8 -*-
"""
Created on Wed Nov 11 16:42:13 2020

@author: Pritam


https://www.myntra.com/gateway/v2/search/kurta-pyjama?f=Categories%3APyjamas&rows=50&o=0
https://www.myntra.com/gateway/v2/search/kurta-pyjama?rows=50&o=0

https://www.myntra.com/gateway/v2/product/2471500/related

https://www.myntra.com/gateway/v2/search/kurta-pyjama?f=Categories%3APyjamas&rows=50&o=0
"""

import requests
from bs4 import BeautifulSoup
import os
import math
import numpy as np
import pandas as pd
import json
from pathlib import Path
path = Path(os.path.dirname(os.path.realpath(__file__)))

htmlstr = """<div class="desktop-pSearchlinks" data-reactid="127"><!-- react-text: 128 --> <!-- /react-text --><a href="/makeup" data-reactid="129"><!-- react-text: 130 --> <!-- /react-text --><!-- react-text: 131 -->Makeup<!-- /react-text --><!-- react-text: 132 --> <!-- /react-text --></a><a href="/girls-dresses" data-reactid="133"><!-- react-text: 134 --> <!-- /react-text --><!-- react-text: 135 -->Dresses For Girls<!-- /react-text --><!-- react-text: 136 --> <!-- /react-text --></a><a href="/tshirts" data-reactid="137"><!-- react-text: 138 --> <!-- /react-text --><!-- react-text: 139 -->T-Shirts<!-- /react-text --><!-- react-text: 140 --> <!-- /react-text --></a><a href="/sandals" data-reactid="141"><!-- react-text: 142 --> <!-- /react-text --><!-- react-text: 143 -->Sandals<!-- /react-text --><!-- react-text: 144 --> <!-- /react-text --></a><a href="/headphones" data-reactid="145"><!-- react-text: 146 --> <!-- /react-text --><!-- react-text: 147 -->Headphones<!-- /react-text --><!-- react-text: 148 --> <!-- /react-text --></a><a href="/babydolls" data-reactid="149"><!-- react-text: 150 --> <!-- /react-text --><!-- react-text: 151 -->Babydolls<!-- /react-text --><!-- react-text: 152 --> <!-- /react-text --></a><a href="/men-blazers" data-reactid="153"><!-- react-text: 154 --> <!-- /react-text --><!-- react-text: 155 -->Blazers For Men<!-- /react-text --><!-- react-text: 156 --> <!-- /react-text --></a><a href="/handbags" data-reactid="157"><!-- react-text: 158 --> <!-- /react-text --><!-- react-text: 159 -->Handbags<!-- /react-text --><!-- react-text: 160 --> <!-- /react-text --></a><a href="/women-watches" data-reactid="161"><!-- react-text: 162 --> <!-- /react-text --><!-- react-text: 163 -->Ladies Watches<!-- /react-text --><!-- react-text: 164 --> <!-- /react-text --></a><a href="/bags" data-reactid="165"><!-- react-text: 166 --> <!-- /react-text --><!-- react-text: 167 -->Bags<!-- /react-text --><!-- react-text: 168 --> <!-- /react-text --></a><a href="/sports-shoes" data-reactid="169"><!-- react-text: 170 --> <!-- /react-text --><!-- react-text: 171 -->Sport Shoes<!-- /react-text --><!-- react-text: 172 --> <!-- /react-text --></a><a href="/reebok-shoes" data-reactid="173"><!-- react-text: 174 --> <!-- /react-text --><!-- react-text: 175 -->Reebok Shoes<!-- /react-text --><!-- react-text: 176 --> <!-- /react-text --></a><a href="/puma-shoes" data-reactid="177"><!-- react-text: 178 --> <!-- /react-text --><!-- react-text: 179 -->Puma Shoes<!-- /react-text --><!-- react-text: 180 --> <!-- /react-text --></a><a href="/men-boxers" data-reactid="181"><!-- react-text: 182 --> <!-- /react-text --><!-- react-text: 183 -->Boxers<!-- /react-text --><!-- react-text: 184 --> <!-- /react-text --></a><a href="/wallets" data-reactid="185"><!-- react-text: 186 --> <!-- /react-text --><!-- react-text: 187 -->Wallets<!-- /react-text --><!-- react-text: 188 --> <!-- /react-text --></a><a href="/women-shirts-tops-tees" data-reactid="189"><!-- react-text: 190 --> <!-- /react-text --><!-- react-text: 191 -->Tops<!-- /react-text --><!-- react-text: 192 --> <!-- /react-text --></a><a href="/earrings" data-reactid="193"><!-- react-text: 194 --> <!-- /react-text --><!-- react-text: 195 -->Earrings<!-- /react-text --><!-- react-text: 196 --> <!-- /react-text --></a><a href="/fastrack-watches" data-reactid="197"><!-- react-text: 198 --> <!-- /react-text --><!-- react-text: 199 -->Fastrack Watches<!-- /react-text --><!-- react-text: 200 --> <!-- /react-text --></a><a href="/women-kurtas-kurtis-suits" data-reactid="201"><!-- react-text: 202 --> <!-- /react-text --><!-- react-text: 203 -->Kurtis<!-- /react-text --><!-- react-text: 204 --> <!-- /react-text --></a><a href="/nike" data-reactid="205"><!-- react-text: 206 --> <!-- /react-text --><!-- react-text: 207 -->Nike<!-- /react-text --><!-- react-text: 208 --> <!-- /react-text --></a><a href="/smart-watches" data-reactid="209"><!-- react-text: 210 --> <!-- /react-text --><!-- react-text: 211 -->Smart Watches<!-- /react-text --><!-- react-text: 212 --> <!-- /react-text --></a><a href="/titan-watches" data-reactid="213"><!-- react-text: 214 --> <!-- /react-text --><!-- react-text: 215 -->Titan Watches<!-- /react-text --><!-- react-text: 216 --> <!-- /react-text --></a><a href="/saree-blouse" data-reactid="217"><!-- react-text: 218 --> <!-- /react-text --><!-- react-text: 219 -->Designer Blouse<!-- /react-text --><!-- react-text: 220 --> <!-- /react-text --></a><a href="/gown" data-reactid="221"><!-- react-text: 222 --> <!-- /react-text --><!-- react-text: 223 -->Gowns<!-- /react-text --><!-- react-text: 224 --> <!-- /react-text --></a><a href="/rings" data-reactid="225"><!-- react-text: 226 --> <!-- /react-text --><!-- react-text: 227 -->Rings<!-- /react-text --><!-- react-text: 228 --> <!-- /react-text --></a><a href="/cricket-shoes" data-reactid="229"><!-- react-text: 230 --> <!-- /react-text --><!-- react-text: 231 -->Cricket Shoes<!-- /react-text --><!-- react-text: 232 --> <!-- /react-text --></a><a href="/forever-21" data-reactid="233"><!-- react-text: 234 --> <!-- /react-text --><!-- react-text: 235 -->Forever 21<!-- /react-text --><!-- react-text: 236 --> <!-- /react-text --></a><a href="/eye-makeup" data-reactid="237"><!-- react-text: 238 --> <!-- /react-text --><!-- react-text: 239 -->Eye Makeup<!-- /react-text --><!-- react-text: 240 --> <!-- /react-text --></a><a href="/photo-frames" data-reactid="241"><!-- react-text: 242 --> <!-- /react-text --><!-- react-text: 243 -->Photo Frames<!-- /react-text --><!-- react-text: 244 --> <!-- /react-text --></a><a href="/punjabi-suits" data-reactid="245"><!-- react-text: 246 --> <!-- /react-text --><!-- react-text: 247 -->Punjabi Suits<!-- /react-text --><!-- react-text: 248 --> <!-- /react-text --></a><a href="/bikini" data-reactid="249"><!-- react-text: 250 --> <!-- /react-text --><!-- react-text: 251 -->Bikini<!-- /react-text --><!-- react-text: 252 --> <!-- /react-text --></a><a href="/shop/myntra-fashion-superstar" data-reactid="253"><!-- react-text: 254 --> <!-- /react-text --><!-- react-text: 255 -->Myntra Fashion Show<!-- /react-text --><!-- react-text: 256 --> <!-- /react-text --></a><a href="/lipstick" data-reactid="257"><!-- react-text: 258 --> <!-- /react-text --><!-- react-text: 259 -->Lipstick<!-- /react-text --><!-- react-text: 260 --> <!-- /react-text --></a><a href="/saree" data-reactid="261"><!-- react-text: 262 --> <!-- /react-text --><!-- react-text: 263 -->Saree<!-- /react-text --><!-- react-text: 264 --> <!-- /react-text --></a><a href="/watches" data-reactid="265"><!-- react-text: 266 --> <!-- /react-text --><!-- react-text: 267 -->Watches<!-- /react-text --><!-- react-text: 268 --> <!-- /react-text --></a><a href="/dresses" data-reactid="269"><!-- react-text: 270 --> <!-- /react-text --><!-- react-text: 271 -->Dresses<!-- /react-text --><!-- react-text: 272 --> <!-- /react-text --></a><a href="/lehengas" data-reactid="273"><!-- react-text: 274 --> <!-- /react-text --><!-- react-text: 275 -->Lehenga<!-- /react-text --><!-- react-text: 276 --> <!-- /react-text --></a><a href="/nike-shoes" data-reactid="277"><!-- react-text: 278 --> <!-- /react-text --><!-- react-text: 279 -->Nike Shoes<!-- /react-text --><!-- react-text: 280 --> <!-- /react-text --></a><a href="/goggles" data-reactid="281"><!-- react-text: 282 --> <!-- /react-text --><!-- react-text: 283 -->Goggles<!-- /react-text --><!-- react-text: 284 --> <!-- /react-text --></a><a href="/bra" data-reactid="285"><!-- react-text: 286 --> <!-- /react-text --><!-- react-text: 287 -->Bras<!-- /react-text --><!-- react-text: 288 --> <!-- /react-text --></a><a href="/men-suits" data-reactid="289"><!-- react-text: 290 --> <!-- /react-text --><!-- react-text: 291 -->Suit<!-- /react-text --><!-- react-text: 292 --> <!-- /react-text --></a><a href="/chinos" data-reactid="293"><!-- react-text: 294 --> <!-- /react-text --><!-- react-text: 295 -->Chinos<!-- /react-text --><!-- react-text: 296 --> <!-- /react-text --></a><a href="/shoes" data-reactid="297"><!-- react-text: 298 --> <!-- /react-text --><!-- react-text: 299 -->Shoes<!-- /react-text --><!-- react-text: 300 --> <!-- /react-text --></a><a href="/adidas-shoes" data-reactid="301"><!-- react-text: 302 --> <!-- /react-text --><!-- react-text: 303 -->Adidas Shoes<!-- /react-text --><!-- react-text: 304 --> <!-- /react-text --></a><a href="/woodland-shoes" data-reactid="305"><!-- react-text: 306 --> <!-- /react-text --><!-- react-text: 307 -->Woodland Shoes<!-- /react-text --><!-- react-text: 308 --> <!-- /react-text --></a><a href="/jewellery" data-reactid="309"><!-- react-text: 310 --> <!-- /react-text --><!-- react-text: 311 -->Jewellery<!-- /react-text --><!-- react-text: 312 --> <!-- /react-text --></a><a href="/designer-saree" data-reactid="313"><!-- react-text: 314 --> <!-- /react-text --><!-- react-text: 315 -->Designers Sarees<!-- /react-text --><!-- react-text: 316 --> <!-- /react-text --></a><!-- react-text: 317 --> <!-- /react-text --></div>"""
soup = BeautifulSoup(htmlstr, "html.parser")
list = []
listresult = soup.findAll("a", href=True)
for index, alink in enumerate(listresult):
    list.append(alink.attrs.get("href"))

headers = {
    'User-Agent': 'Mozilla/5.0 (iPad; U; CPU OS 3_2_1 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Mobile/7B405'}
# for index, alink in enumerate(list):
#     URL = 'https://www.myntra.com/gateway/v2/search'+list[index]+'?rows=50&o=0'
#     print(URL)
#     page = requests.get(URL, headers=headers)
#     with open( str(index)+ '.json', 'w') as outfile:
#         outfile.write(str(page.content))
index = 1
URL = 'https://www.myntra.com/gateway/v2/search'+list[index]+'?rows=50&o=0'
print(URL)
page = requests.get(URL, headers=headers)
with open( str(index)+ '.json', 'w') as outfile:
    outfile.write(str(page.content))